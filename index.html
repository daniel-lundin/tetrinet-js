<!DOCTYPE html>
<html>
  <head>
    <title>Tetrinet js</title>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/static/js/drawing.js"></script>
    <script>

    var socket = io.connect('/');
    var player_id;

    socket.on('playfield_update', function(data) {
      var canvas = document.getElementById('canvas');
      draw_fields(canvas, data);
    });

    socket.on('id_assigned', function(data) {
      console.log("I'm player " + data);
      player_id = data;
    });

    document.onkeydown = function(e) {
      switch(e.keyCode) {
        case 37: // left
          socket.send('left');
          break;
        case 39:
          socket.send('right');
          break;
        case 38:
          socket.send('rotate');
          break;
        case 40:
          socket.send('down');
          break;
        case 32:
          socket.send('free_fall');
          break;
        case 73:
          socket.send('inc');
          break;
        default:
          console.log(e.keyCode)
          break;
      }
    }
    </script>
  </head>
  <body>
    <canvas id="canvas" width="600" height="500"></canvas>
  </body>
</html>
