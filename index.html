<!DOCTYPE html>
<html>
  <head>
    <title>Tetrinet js</title>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/static/js/drawing.js"></script>
    <script>

    var socket = io.connect('/');

    socket.on('playfield update', function(data) {
      console.log('update received');
      var canvas = document.getElementById('canvas');
      draw_field(canvas, data);
    });

    document.onkeydown = function(e) {
      switch(e.keyCode) {
        case 37: // left
          socket.send('left');
          break;
        case 39:
          socket.send('right');
          break;
        case 38:
          socket.send('rotate');
          break;
        case 40:
          socket.send('down');
          break;
      }
    }
    </script>
  </head>
  <body>
    <canvas id="canvas" width="300" height="500"></canvas>
  </body>
</html>
